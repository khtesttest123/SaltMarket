<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>주소 가져오기</title>
    <!-- 카카오 지도 API 호출 -->
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=5ceb2de0254b488cc8391c83a12166cd"></script>
</head>
<body>
    <h1>주소 가져오기</h1>
    <div id="map" style="width:100%;height:400px;"></div>
    <div id="result"></div>
    
    <script>
    var mapContainer = document.getElementById('map');
    var mapOption = {
        center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울시청을 중심으로 지도 생성
        level: 11
    };

    // 지도 생성
    var map = new kakao.maps.Map(mapContainer, mapOption);

    // 마커 클릭 이벤트 처리
    kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
        
        // 클릭한 위치의 좌표를 서버로 전송
        var latLng = mouseEvent.latLng;
        var lat = latLng.getLat();
        var lng = latLng.getLng();
        
        // 좌표를 주소로 변환하는 함수 호출
        convertLatLngToAddress(lat, lng);
    });

    // 좌표를 주소로 변환하는 함수
    function convertLatLngToAddress(lat, lng) {
        var geocoder = new kakao.maps.services.Geocoder();
        geocoder.coord2Address(lng, lat, function(result, status) {
            if (status === kakao.maps.services.Status.OK) {
                // 주소 정보를 가져와서 결과 처리
                var address = result[0].address.address_name;
                var resultDiv = document.getElementById('result');
                resultDiv.innerHTML = '선택한 위치의 주소: ' + address;
            } else {
                console.error('주소 변환 실패: ' + status);
            }
        });
    }
    </script>
</body>
</html>